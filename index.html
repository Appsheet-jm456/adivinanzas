<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Adivinanzas ¬∑ Kinetic English</title>
  <style>
    :root{
      /* Identidad Kinetic */
      --brand-primary:#32D6E3; /* turquesa */
      --brand-dark:#4A4A4A;    /* gris oscuro */
      --brand-light:#D9D9D9;   /* gris claro */
      /* UI base */
      --bg:#0b0f19;           
      --card:#0f1627f0; 
      --text:#e8f1f6;
      --muted:#a8b3c7;
      --accent:var(--brand-primary);
      --wrong:#ef4444;
      --button:#1b2336;
      --border:#2b3a55;
      --success:#10b981;
    }
    
    *{box-sizing:border-box}
    
    body{
      margin:0;
      min-height:100vh;
      display:grid;
      place-items:center;
      background:radial-gradient(1200px 600px at 10% -20%,#1f2a44,transparent),
                linear-gradient(135deg, #0b0f19 0%, #162033 50%, #0b0f19 100%);
      color:var(--text);
      font-family:'Inter','Segoe UI',Roboto,Ubuntu,Helvetica,Arial,sans-serif;
      padding:24px;
      font-size:18px;
      overflow-x:hidden;
    }
    
    .container{
      width:min(1100px,100%);
      display:grid;
      gap:18px;
      animation:fadeIn 0.5s ease-in;
    }
    
    @keyframes fadeIn{
      from{opacity:0;transform:translateY(20px)}
      to{opacity:1;transform:translateY(0)}
    }
    
    header{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:14px;
      flex-wrap:wrap;
    }
    
    h1{
      font-size:clamp(36px,5.5vw,56px);
      margin:0;
      font-weight:800;
      letter-spacing:-0.5px;
      background:linear-gradient(135deg, var(--brand-primary), #60e3f0);
      -webkit-background-clip:text;
      -webkit-text-fill-color:transparent;
      background-clip:text;
    }
    
    h2{
      font-size:clamp(24px,3.2vw,34px);
      font-weight:700;
      margin:20px 0 15px;
      line-height:1.3;
    }
    
    .card{
      background:var(--card);
      backdrop-filter:blur(12px);
      border:2px solid var(--border);
      border-radius:24px;
      padding:28px;
      box-shadow:0 20px 60px rgba(0,0,0,0.4),
                 0 0 60px rgba(50,214,227,0.1);
      transition:transform 0.3s ease;
    }
    
    .card:hover{
      transform:translateY(-2px);
    }
    
    .row{
      display:flex;
      gap:14px;
      flex-wrap:wrap;
      align-items:center;
    }
    
    .muted{
      color:var(--muted);
      font-size:16px;
      margin-bottom:8px;
    }
    
    input[type="text"], input[type="password"]{
      flex:1;
      min-width:260px;
      background:rgba(11,18,32,0.8);
      color:var(--text);
      border:2px solid var(--border);
      border-radius:16px;
      padding:14px 18px;
      font-size:18px;
      outline:none;
      transition:all 0.3s ease;
    }
    
    input[type="text"]:focus, input[type="password"]:focus{
      border-color:var(--brand-primary);
      box-shadow:0 0 0 4px rgba(50,214,227,0.2),
                 inset 0 0 20px rgba(50,214,227,0.05);
      background:rgba(11,18,32,0.95);
    }
    
    button{
      background:var(--button);
      color:var(--text);
      border:2px solid var(--border);
      border-radius:16px;
      padding:12px 20px;
      font-size:17px;
      cursor:pointer;
      font-weight:600;
      transition:all 0.3s ease;
      position:relative;
      overflow:hidden;
    }
    
    button::before{
      content:'';
      position:absolute;
      top:50%;
      left:50%;
      width:0;
      height:0;
      background:rgba(255,255,255,0.1);
      border-radius:50%;
      transform:translate(-50%,-50%);
      transition:width 0.4s, height 0.4s;
    }
    
    button:hover::before{
      width:300px;
      height:300px;
    }
    
    button:hover{
      transform:translateY(-2px);
      box-shadow:0 4px 20px rgba(0,0,0,0.3);
      filter:brightness(1.1);
    }
    
    button:active{
      transform:translateY(0);
    }
    
    .btn-primary{
      background:linear-gradient(135deg, var(--brand-primary), #15b5c2);
      border:none;
      color:#06242a;
      font-weight:700;
      box-shadow:0 4px 20px rgba(50,214,227,0.3);
    }
    
    .btn-primary:hover{
      box-shadow:0 6px 30px rgba(50,214,227,0.5);
    }
    
    .btn-hint{
      background:rgba(139,92,246,0.15);
      border-color:rgba(139,92,246,0.5);
      color:#c4b5fd;
    }
    
    .btn-hint:hover{
      background:rgba(139,92,246,0.25);
      border-color:#8b5cf6;
    }
    
    .btn-hint:disabled{
      opacity:0.4;
      cursor:not-allowed;
    }
    
    .tag{
      display:inline-block;
      border:2px dashed var(--border);
      border-radius:999px;
      padding:8px 14px;
      font-size:14px;
      background:rgba(50,214,227,0.05);
    }
    
    .status{
      font-weight:700;
      font-size:18px;
      padding:8px 16px;
      border-radius:12px;
      display:inline-block;
      animation:slideIn 0.3s ease;
    }
    
    @keyframes slideIn{
      from{opacity:0;transform:translateX(20px)}
      to{opacity:1;transform:translateX(0)}
    }
    
    .status.ok{
      color:var(--success);
      background:rgba(16,185,129,0.1);
      border:2px solid rgba(16,185,129,0.3);
    }
    
    .status.bad{
      color:var(--wrong);
      background:rgba(239,68,68,0.1);
      border:2px solid rgba(239,68,68,0.3);
    }
    
    .hint-box{
      background:rgba(139,92,246,0.1);
      border:2px solid rgba(139,92,246,0.3);
      border-radius:16px;
      padding:12px 16px;
      margin-top:12px;
      color:#c4b5fd;
      animation:fadeIn 0.3s ease;
    }
    
    .img-wrap{
      display:grid;
      place-items:center;
      margin:20px 0;
      animation:fadeIn 0.5s ease;
    }
    
    .img-wrap img{
      max-width:100%;
      max-height:300px;
      border-radius:20px;
      border:3px solid var(--border);
      box-shadow:0 10px 40px rgba(0,0,0,0.3);
    }
    
    .progress{
      height:12px;
      background:rgba(11,18,32,0.8);
      border:2px solid var(--border);
      border-radius:999px;
      overflow:hidden;
      margin-top:20px;
      position:relative;
    }
    
    .progress>div{
      height:100%;
      background:linear-gradient(90deg,var(--brand-primary),#60a5fa);
      width:0%;
      transition:width 0.5s ease;
      box-shadow:0 0 20px rgba(50,214,227,0.5);
      position:relative;
    }
    
    .progress>div::after{
      content:'';
      position:absolute;
      top:0;
      left:0;
      right:0;
      bottom:0;
      background:linear-gradient(90deg,transparent,rgba(255,255,255,0.3),transparent);
      animation:shimmer 2s infinite;
    }
    
    @keyframes shimmer{
      0%{transform:translateX(-100%)}
      100%{transform:translateX(100%)}
    }
    
    .pill{
      display:flex;
      align-items:center;
      gap:12px;
      padding:10px 16px;
      border-radius:999px;
      background:rgba(11,18,32,0.8);
      border:2px solid var(--border);
      font-weight:600;
      box-shadow:0 4px 20px rgba(0,0,0,0.2);
    }
    
    .pill strong{
      color:var(--brand-primary);
      font-size:20px;
    }
    
    .pill .small{
      font-weight:500;
      color:var(--muted);
      font-size:14px;
    }
    
    footer{
      display:flex;
      justify-content:center;
      flex-wrap:wrap;
      gap:10px;
      padding-top:20px;
      border-top:1px solid var(--border);
      margin-top:20px;
    }
    
    .sr-only{
      position:absolute;
      width:1px;
      height:1px;
      padding:0;
      margin:-1px;
      overflow:hidden;
      clip:rect(0,0,0,0);
      white-space:nowrap;
      border:0;
    }

    /* Overlay PIN mejorado */
    .gate{
      position:fixed;
      inset:0;
      background:rgba(5,8,15,0.95);
      display:grid;
      place-items:center;
      z-index:50;
      backdrop-filter:blur(10px);
    }
    
    .gate .panel{
      background:var(--card);
      border:2px solid var(--border);
      border-radius:28px;
      padding:36px;
      max-width:480px;
      width:90%;
      text-align:center;
      box-shadow:0 25px 80px rgba(0,0,0,0.5),
                 0 0 80px rgba(50,214,227,0.15);
      animation:scaleIn 0.4s ease;
    }
    
    @keyframes scaleIn{
      from{opacity:0;transform:scale(0.9)}
      to{opacity:1;transform:scale(1)}
    }
    
    .gate h3{
      margin:0 0 12px 0;
      font-size:clamp(28px,4vw,40px);
      font-weight:800;
      background:linear-gradient(135deg, var(--brand-primary), #60e3f0);
      -webkit-background-clip:text;
      -webkit-text-fill-color:transparent;
      background-clip:text;
    }
    
    .gate p{
      color:var(--muted);
      margin:0 0 20px 0;
      font-size:18px;
    }
    
    .gate input{
      width:100%;
      margin-bottom:16px;
      text-align:center;
      font-size:22px;
      letter-spacing:8px;
    }
    
    .gate button{
      width:100%;
      padding:14px;
      font-size:18px;
    }
    
    #pinMsg{
      color:var(--wrong);
      font-weight:600;
      animation:shake 0.3s;
    }
    
    @keyframes shake{
      0%,100%{transform:translateX(0)}
      25%{transform:translateX(-5px)}
      75%{transform:translateX(5px)}
    }
    
    /* Confetti animation */
    .confetti{
      position:fixed;
      width:10px;
      height:10px;
      background:var(--brand-primary);
      position:absolute;
      animation:confetti-fall 3s ease-out forwards;
    }
    
    @keyframes confetti-fall{
      0%{transform:translateY(-100vh) rotate(0deg);opacity:1}
      100%{transform:translateY(100vh) rotate(720deg);opacity:0}
    }

    /* Game complete overlay */
    .complete-overlay{
      position:fixed;
      inset:0;
      background:rgba(5,8,15,0.95);
      display:none;
      place-items:center;
      z-index:100;
      backdrop-filter:blur(10px);
    }
    
    .complete-panel{
      background:var(--card);
      border:3px solid var(--brand-primary);
      border-radius:32px;
      padding:40px;
      text-align:center;
      max-width:500px;
      width:90%;
      box-shadow:0 30px 100px rgba(50,214,227,0.4);
      animation:scaleIn 0.5s ease;
    }
    
    .complete-panel h2{
      font-size:clamp(32px,5vw,48px);
      margin:0 0 20px 0;
      background:linear-gradient(135deg, var(--brand-primary), #60e3f0);
      -webkit-background-clip:text;
      -webkit-text-fill-color:transparent;
      background-clip:text;
    }
    
    .trophy{
      font-size:72px;
      margin:20px 0;
      animation:bounce 1s ease infinite;
    }
    
    @keyframes bounce{
      0%,100%{transform:translateY(0)}
      50%{transform:translateY(-10px)}
    }
    
    .score-display{
      font-size:24px;
      font-weight:700;
      color:var(--brand-primary);
      margin:20px 0;
    }
    
    .btn-restart{
      margin-top:20px;
      padding:14px 32px;
      font-size:18px;
    }
  </style>
</head>
<body>
  <!-- Overlay de PIN -->
  <div class="gate" id="gate">
    <div class="panel">
      <h3>üîê Ingresa tu PIN</h3>
      <p>Clave para iniciar el juego</p>
      <input id="pinInput" type="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢" maxlength="10" autocomplete="off"/>
      <button id="pinBtn" class="btn-primary">Entrar al Juego</button>
      <div class="muted" id="pinMsg" style="margin-top:12px"></div>
    </div>
  </div>

  <!-- Overlay de juego completado -->
  <div class="complete-overlay" id="completeOverlay">
    <div class="complete-panel">
      <div class="trophy">üèÜ</div>
      <h2>¬°Felicidades!</h2>
      <p style="color:var(--muted);font-size:18px">Has completado todas las adivinanzas</p>
      <div class="score-display">
        Puntuaci√≥n Final: <span id="finalScore">0</span> / <span id="finalMax">0</span>
      </div>
      <div id="performance" style="margin:20px 0;font-size:18px"></div>
      <button class="btn-primary btn-restart" onclick="restartGame()">Jugar de Nuevo</button>
    </div>
  </div>

  <div class="container" id="gameWrap" style="display:none">
    <header>
      <h1 id="game-title">Adivinanzas</h1>
      <div class="pill">
        <div><strong id="points">0</strong>/<span id="maxpoints">0</span> pts</div>
        <div class="small">Progreso: <span id="done">0</span>/<span id="total">0</span></div>
      </div>
    </header>

    <div class="card" id="card">
      <div class="muted" id="category">Tema: ‚Äî</div>

      <div class="img-wrap" id="imageWrap" hidden>
        <img id="image" alt="Imagen de pista" loading="lazy" />
      </div>

      <h2 id="riddle"></h2>

      <div class="row">
        <label class="sr-only" for="answer">Tu respuesta</label>
        <input type="text" id="answer" placeholder="Escribe tu respuesta aqu√≠..." autocomplete="off" />
        <button class="btn-primary" id="checkBtn">Comprobar</button>
      </div>

      <div class="row" style="margin-top:12px">
        <button class="btn-hint" id="hint1Btn">üí° Pista 1</button>
        <button class="btn-hint" id="hint2Btn">‚ú® Pista 2</button>
        <div class="tag">Puntaje: 100 sin pistas ¬∑ 50 con 1 ¬∑ 25 con 2</div>
      </div>

      <div id="hintContainer" style="margin-top:12px"></div>
      <div id="statusContainer" style="margin-top:12px;text-align:center"></div>

      <div class="progress"><div id="bar"></div></div>
    </div>

    <footer class="muted">
      <div>¬© 2025 Kinetic English ‚Äî Juego Educativo Interactivo</div>
    </footer>
  </div>

  <!-- Audios opcionales (comentados por ahora) -->
  <audio id="snd-correct" preload="auto"></audio>
  <audio id="snd-wrong" preload="auto"></audio>
  <audio id="snd-click" preload="auto"></audio>
  <audio id="snd-hint" preload="auto"></audio>

  <script>
    /* ==========================
       üîß CONFIGURACI√ìN R√ÅPIDA
       ========================== */
    const CONFIG = {
      title: "Kinetic English ¬∑ Adivinanzas",
      category: "M√≥dulo 1 ¬∑ Vocabulario: Animales y Naturaleza",
      allowAccentFree: true,
      gate: { 
        enabled: true, 
        pin: "2025"  // PIN para acceder al juego
      },
      // Configuraci√≥n de sonidos (puedes agregar URLs de sonidos MP3)
      sounds: { 
        correct: "", 
        wrong: "", 
        click: "", 
        hint: "" 
      },
      messages: { 
        correct: "¬°Excelente! ¬°Lo lograste! üéâ", 
        incorrect: "No es correcto, pero sigue intentando üí™" 
      },
      // ADIVINANZAS - Puedes agregar m√°s aqu√≠
      items: [
        { 
          clue: "Tengo rayas blancas y negras, y parezco un caballo. ¬øQui√©n soy?", 
          answer: "cebra", 
          hint1: "Comienza con la letra 'C'", 
          hint2: "Vive en las sabanas de √Åfrica",
          image: "https://upload.wikimedia.org/wikipedia/commons/thumb/e/e3/Plains_Zebra_Equus_quagga.jpg/220px-Plains_Zebra_Equus_quagga.jpg"
        },
        { 
          clue: "No soy gato ni perro, digo 'muuu' y doy leche. ¬øQu√© soy?", 
          answer: "vaca", 
          hint1: "Rima con 'flaca'", 
          hint2: "Es un animal de granja muy com√∫n",
          image: ""
        },
        { 
          clue: "Vuelo sin alas y lloro sin ojos. ¬øQu√© soy?", 
          answer: "nube", 
          hint1: "A veces tapa el sol", 
          hint2: "Est√° en el cielo y trae lluvia",
          image: "https://upload.wikimedia.org/wikipedia/commons/thumb/9/9c/Appearance_of_sky_for_weather_forecast%2C_Dhaka%2C_Bangladesh.JPG/220px-Appearance_of_sky_for_weather_forecast%2C_Dhaka%2C_Bangladesh.JPG"
        },
        {
          clue: "Soy el rey de la selva, tengo melena y rujo fuerte. ¬øQui√©n soy?",
          answer: "le√≥n",
          hint1: "Mi nombre tiene 4 letras",
          hint2: "Soy un felino grande y poderoso",
          image: ""
        },
        {
          clue: "Tengo ocho patas y tejo una red. ¬øQu√© soy?",
          answer: "ara√±a",
          hint1: "Empiezo con la letra 'A'",
          hint2: "Algunos me temen, pero ayudo controlando insectos",
          image: ""
        },
        {
          clue: "Soy redondo como una pelota, naranja y me usan en Halloween. ¬øQu√© soy?",
          answer: "calabaza",
          hint1: "Soy una verdura",
          hint2: "Me tallan caras para asustar",
          image: ""
        }
      ]
    };

    /* ==========================
       üöÄ L√ìGICA DEL JUEGO
       ========================== */
    const titleEl = document.getElementById('game-title');
    const categoryEl = document.getElementById('category');
    const riddleEl = document.getElementById('riddle');
    const imageWrap = document.getElementById('imageWrap');
    const imageEl = document.getElementById('image');
    const answerEl = document.getElementById('answer');
    const statusContainer = document.getElementById('statusContainer');
    const hintContainer = document.getElementById('hintContainer');
    const barEl = document.getElementById('bar');

    const pointsEl = document.getElementById('points');
    const maxpointsEl = document.getElementById('maxpoints');
    const doneEl = document.getElementById('done');
    const totalEl = document.getElementById('total');

    const checkBtn = document.getElementById('checkBtn');
    const hint1Btn = document.getElementById('hint1Btn');
    const hint2Btn = document.getElementById('hint2Btn');

    const SND = {
      correct: document.getElementById('snd-correct'),
      wrong: document.getElementById('snd-wrong'),
      click: document.getElementById('snd-click'),
      hint: document.getElementById('snd-hint'),
    };

    function initSounds(){
      if(CONFIG.sounds?.correct) SND.correct.src = CONFIG.sounds.correct;
      if(CONFIG.sounds?.wrong)   SND.wrong.src   = CONFIG.sounds.wrong;
      if(CONFIG.sounds?.click)   SND.click.src   = CONFIG.sounds.click;
      if(CONFIG.sounds?.hint)    SND.hint.src    = CONFIG.sounds.hint;
    }
    
    function play(name){ 
      try{ 
        if(SND[name] && SND[name].src){
          SND[name].currentTime = 0; 
          SND[name].play(); 
        }
      }catch(e){} 
    }

    const normalize = (s) => {
      if(!s) return '';
      return CONFIG.allowAccentFree
        ? s.normalize('NFD').replace(/[\u0300-\u036f]/g, '').toLowerCase().trim()
        : s.toLowerCase().trim();
    }

    let index = 0;
    let totalScore = 0;
    let hintLevel = 0;
    let isProcessing = false;

    // Mezclar las adivinanzas aleatoriamente
    const items = [...CONFIG.items].sort(() => Math.random() - 0.5);
    const MAX_POINTS = items.length * 100;

    function setProgress(){
      const pct = (index / items.length) * 100;
      barEl.style.width = pct + '%';
      pointsEl.textContent = totalScore;
      maxpointsEl.textContent = MAX_POINTS;
      doneEl.textContent = Math.min(index, items.length);
      totalEl.textContent = items.length;
    }

    function showCompleteScreen(){
      const completeOverlay = document.getElementById('completeOverlay');
      const finalScore = document.getElementById('finalScore');
      const finalMax = document.getElementById('finalMax');
      const performance = document.getElementById('performance');
      
      finalScore.textContent = totalScore;
      finalMax.textContent = MAX_POINTS;
      
      const percentage = (totalScore / MAX_POINTS) * 100;
      let message = '';
      let emoji = '';
      
      if(percentage === 100){
        message = '¬°Perfecto! Eres un maestro de las adivinanzas';
        emoji = 'üåüüèÜüåü';
      } else if(percentage >= 80){
        message = '¬°Excelente trabajo! Casi perfecto';
        emoji = 'üéØ';
      } else if(percentage >= 60){
        message = '¬°Buen trabajo! Sigue practicando';
        emoji = 'üëç';
      } else if(percentage >= 40){
        message = 'No est√° mal, pero puedes mejorar';
        emoji = 'üí™';
      } else {
        message = 'Necesitas m√°s pr√°ctica, ¬°int√©ntalo de nuevo!';
        emoji = 'üìö';
      }
      
      performance.innerHTML = `${emoji}<br>${message}`;
      completeOverlay.style.display = 'grid';
      
      // Crear efecto de confetti
      for(let i = 0; i < 30; i++){
        setTimeout(() => {
          const confetti = document.createElement('div');
          confetti.className = 'confetti';
          confetti.style.left = Math.random() * 100 + '%';
          confetti.style.background = `hsl(${Math.random() * 360}, 100%, 50%)`;
          confetti.style.animationDelay = Math.random() * 0.5 + 's';
          document.body.appendChild(confetti);
          setTimeout(() => confetti.remove(), 3000);
        }, i * 50);
      }
    }

    function restartGame(){
      index = 0;
      totalScore = 0;
      hintLevel = 0;
      isProcessing = false;
      
      // Remezclar items
      items.sort(() => Math.random() - 0.5);
      
      const completeOverlay = document.getElementById('completeOverlay');
      completeOverlay.style.display = 'none';
      
      loadItem();
    }

    function loadItem(){
      if(index >= items.length){
        showCompleteScreen();
        return;
      }
      
      const it = items[index];
      titleEl.textContent = CONFIG.title || 'Adivinanzas';
      categoryEl.textContent = CONFIG.category || 'General';
      riddleEl.textContent = it.clue;
      hintContainer.innerHTML = '';
      statusContainer.innerHTML = '';
      answerEl.value = '';
      answerEl.focus();
      hintLevel = 0;
      isProcessing = false;
      
      hint1Btn.disabled = false; 
      hint2Btn.disabled = false;
      checkBtn.disabled = false;
      answerEl.disabled = false;
      
      if(it.image){ 
        imageEl.src = it.image; 
        imageWrap.hidden = false; 
      } else { 
        imageWrap.hidden = true; 
      }
      
      setProgress();
    }

    function pointsFor(h){ 
      return h === 0 ? 100 : h === 1 ? 50 : 25; 
    }

    function check(){
      if(isProcessing) return;
      const it = items[index];
      if(!it) return;
      
      const userAnswer = normalize(answerEl.value);
      const correctAnswer = normalize(it.answer);
      
      if(!userAnswer){
        statusContainer.innerHTML = '<div class="status bad">Por favor escribe una respuesta</div>';
        return;
      }
      
      isProcessing = true;
      checkBtn.disabled = true;
      answerEl.disabled = true;
      
      const isCorrect = userAnswer === correctAnswer;
      
      if(isCorrect){
        const earned = pointsFor(hintLevel);
        totalScore += earned;
        statusContainer.innerHTML = `<div class="status ok">${CONFIG.messages?.correct || '¬°Correcto!'} (+${earned} pts)</div>`;
        play('correct');
      } else {
        statusContainer.innerHTML = `<div class="status bad">${CONFIG.messages?.incorrect || 'Incorrecto'}<br>La respuesta era: <strong>${it.answer}</strong> (+0 pts)
