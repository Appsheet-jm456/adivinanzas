<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Juego: SÃ­ o No Â· Kinetic English</title>
  <style>
    :root{
      --brand-primary:#32D6E3; --brand-dark:#4A4A4A; --brand-light:#D9D9D9;
      --bg:#0b0f19; --card:#0f1627f0; --text:#e8f1f6; --muted:#a8b3c7; --accent:var(--brand-primary);
      --wrong:#ef4444; --button:#1b2336; --border:#2b3a55;
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,Ubuntu,Helvetica,Arial,sans-serif;background:radial-gradient(1200px 600px at 10% -20%,#1f2a44,transparent),var(--bg);color:var(--text);min-height:100vh;padding:28px;font-size:18px;display:grid;place-items:center}
    .container{width:min(900px,100%);display:grid;gap:20px}
    header{display:flex;justify-content:space-between;align-items:center}
    h1{font-size:clamp(36px,5.5vw,56px);margin:0;font-weight:800;color:var(--brand-primary)}
    .card{background:var(--card);border:2px solid var(--border);border-radius:22px;padding:24px;box-shadow:0 18px 40px #0006}
    h2{font-size:clamp(26px,3.5vw,38px);margin:0 0 14px;font-weight:800}
    button{background:var(--button);color:var(--text);border:2px solid var(--border);border-radius:14px;padding:14px 22px;font-size:20px;cursor:pointer;font-weight:700;margin:6px 0}
    button:hover{filter:brightness(1.08)}
    .btn-yes{background:var(--brand-primary);border-color:#15b5c2;color:#06242a}
    .btn-no{background:var(--wrong);border-color:#b91c1c;color:#fff}
    .status{font-weight:800;margin-top:12px}
    .status.ok{color:var(--accent)}
    .status.bad{color:var(--wrong)}
    .progress{height:10px;background:#0b1220;border:2px solid var(--border);border-radius:999px;overflow:hidden;margin-top:14px}
    .progress>div{height:100%;background:linear-gradient(90deg,var(--brand-primary),#60a5fa);width:0%}
    .pill{display:flex;gap:10px;align-items:center;padding:6px 12px;border-radius:999px;background:#0b1220;border:2px solid var(--border);font-weight:700}
    footer{margin-top:12px;font-size:14px;color:var(--muted)}
    /* Aviso si no hay sesiÃ³n */
    .lock{position:fixed;inset:0;display:grid;place-items:center;background:rgba(0,0,0,.75);backdrop-filter:blur(2px)}
    .lock .panel{background:var(--card);border:2px solid var(--border);border-radius:18px;padding:20px;max-width:520px;width:92%;text-align:center}
  </style>
</head>
<body>
  <div class="container" id="app" hidden>
    <header>
      <h1>SÃ­ o No</h1>
      <div class="pill"><span id="points">0</span>/<span id="maxpoints">0</span> pts</div>
    </header>

    <div class="card">
      <h2 id="question"></h2>
      <button class="btn-yes" id="yesBtn">SÃ­</button>
      <button class="btn-no" id="noBtn">No</button>
      <div id="status" class="status"></div>
      <div class="progress"><div id="bar"></div></div>
    </div>

    <footer>Â© Kinetic English â€” Plantilla SÃ­/No</footer>
  </div>

  <div id="lock" class="lock" hidden>
    <div class="panel">
      <h2>ðŸ”’ Acceso restringido</h2>
      <p>Ve a <strong>acceso.html</strong> e introduce el PIN para iniciar el juego.</p>
      <p style="margin-top:8px"><a href="acceso.html" style="color:#32D6E3;font-weight:800">Ir a acceso</a></p>
    </div>
  </div>

  <script>
    // ====== Gate por sesiÃ³n ======
    const ok = sessionStorage.getItem('ke_gate') === 'ok';
    const params = new URLSearchParams(location.search);
    const demo = params.get('demo') === '1'; // juego.html?demo=1 â†’ salta el PIN para pruebas

    const appEl = document.getElementById('app');
    const lockEl = document.getElementById('lock');

    if (ok || demo) {
      appEl.hidden = false;
    } else {
      lockEl.hidden = false;
    }

    // ====== Juego SÃ­/No ======
    const CONFIG = {
      sounds: { correct:"", wrong:"", click:"" },
      messages:{ correct:"Â¡Bien hecho!", incorrect:"Ups, intÃ©ntalo otra vez." },
      items:[
        {q:"Â¿El sol es una estrella?", correct:"sÃ­"},
        {q:"Â¿2 + 2 = 5?", correct:"no"},
        {q:"Â¿El perro ladra?", correct:"sÃ­"}
      ]
    };

    const qEl=document.getElementById('question');
    const statusEl=document.getElementById('status');
    const yesBtn=document.getElementById('yesBtn');
    const noBtn=document.getElementById('noBtn');
    const barEl=document.getElementById('bar');
    const ptsEl=document.getElementById('points');
    const maxEl=document.getElementById('maxpoints');

    let index=0,score=0;
    const items=CONFIG.items;
    const MAX=items.length*100; maxEl.textContent=MAX;

    const SND={correct:new Audio(CONFIG.sounds.correct),wrong:new Audio(CONFIG.sounds.wrong),click:new Audio(CONFIG.sounds.click)};
    function play(n){try{SND[n]?.currentTime=0;SND[n]?.play();}catch(e){}}

    function setProgress(){barEl.style.width=(index/items.length*100)+"%";ptsEl.textContent=score;}

    function load(){
      if(index>=items.length){qEl.textContent="Â¡Juego terminado!";statusEl.textContent=`Puntaje: ${score}/${MAX}`;yesBtn.disabled=noBtn.disabled=true;return;}
      qEl.textContent=items[index].q;statusEl.textContent="";yesBtn.disabled=noBtn.disabled=false;setProgress();
    }

    function check(ans){
      const it=items[index];
      if(ans===it.correct){score+=100;statusEl.textContent=CONFIG.messages.correct;statusEl.className="status ok";play('correct');}
      else{statusEl.textContent=CONFIG.messages.incorrect;statusEl.className="status bad";play('wrong');}
      index++;setProgress();setTimeout(load,1000);
    }

    if(!lockEl.hidden){
      // No iniciar lÃ³gica si estÃ¡ bloqueado
    } else {
      yesBtn.addEventListener('click',()=>{play('click');check('sÃ­');});
      noBtn.addEventListener('click',()=>{play('click');check('no');});
      setProgress();
      load();
    }
  </script>
</body>
</html>
